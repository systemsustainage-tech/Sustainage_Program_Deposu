{% extends "base.html" %}

{% block title %}Monitoring Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
<div>
<h1 class="h2">Monitoring Dashboard</h1>
<p class="text-muted mb-0">
            Canlı sistem durumu, oturum ve güvenlik istatistikleri
        </p>
</div>
<div class="btn-toolbar mb-2 mb-md-0">

<button class="btn btn-sm btn-outline-secondary ms-2" onclick="history.back()"><i class="bi bi-arrow-left"></i> {{ _('btn_back', 'Geri') }}</button></div>
</div>
<div class="row g-4 mb-4">
<div class="col-md-3">
<div class="card border-0 shadow-sm">
<div class="card-body">
<div class="d-flex align-items-center">
<div class="display-6 text-primary me-3">
<i class="bi bi-people-fill"></i>
</div>
<div>
<div class="text-muted small">Aktif Kullanıcılar</div>
<div class="h3 mb-0">{{ live_stats.active_users }}</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-3">
<div class="card border-0 shadow-sm">
<div class="card-body">
<div class="d-flex align-items-center">
<div class="display-6 text-success me-3">
<i class="bi bi-clock-history"></i>
</div>
<div>
<div class="text-muted small">Bugünkü Oturumlar</div>
<div class="h3 mb-0">{{ live_stats.sessions_today }}</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-3">
<div class="card border-0 shadow-sm">
<div class="card-body">
<div class="d-flex align-items-center">
<div class="display-6 text-danger me-3">
<i class="bi bi-shield-exclamation"></i>
</div>
<div>
<div class="text-muted small">Son 1 Saat Başarısız Giriş</div>
<div class="h3 mb-0">{{ live_stats.failed_logins }}</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-3">
<div class="card border-0 shadow-sm">
<div class="card-body">
<div class="d-flex align-items-center">
<div class="display-6 text-warning me-3">
<i class="bi bi-bell-fill"></i>
</div>
<div>
<div class="text-muted small">Son 24 Saat Güvenlik Olayı</div>
<div class="h3 mb-0">{{ live_stats.security_events }}</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="row g-4 mb-4">
<div class="col-md-4">
<div class="card border-0 shadow-sm">
<div class="card-body">
<h5 class="card-title">CPU Kullanımı</h5>
<div class="d-flex align-items-center">
<div class="display-6 text-info me-3">
<i class="bi bi-cpu-fill"></i>
</div>
<div>
<div class="h3 mb-0">{{ live_stats.cpu_usage }}%</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-4">
<div class="card border-0 shadow-sm">
<div class="card-body">
<h5 class="card-title">Bellek Kullanımı</h5>
<div class="d-flex align-items-center">
<div class="display-6 text-success me-3">
<i class="bi bi-memory"></i>
</div>
<div>
<div class="h3 mb-0">{{ live_stats.memory_usage }}%</div>
</div>
</div>
</div>
</div>
</div>
<div class="col-md-4">
<div class="card border-0 shadow-sm">
<div class="card-body">
<h5 class="card-title">Disk Kullanımı</h5>
<div class="d-flex align-items-center">
<div class="display-6 text-danger me-3">
<i class="bi bi-hdd-stack-fill"></i>
</div>
<div>
<div class="h3 mb-0">{{ live_stats.disk_usage }}%</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="row g-4">
<div class="col-lg-6">
<div class="card border-0 shadow-sm mb-4">
<div class="card-header">
<h5 class="mb-0">Giriş Aktivitesi (Son 24 Saat)</h5>
</div>
<div class="card-body p-0">
<div class="table-responsive">
<table class="table table-striped table-hover mb-0">
<thead class="table-light">
<tr>
<th>Saat</th>
<th>Giriş Sayısı</th>
</tr>
</thead>
<tbody>
                            {% for item in login_activity %}
                            <tr>
<td>{{ item.time }}</td>
<td>{{ item.value }}</td>
</tr>
                            {% else %}
                            <tr>
<td class="text-center py-3 text-muted" colspan="2">Veri bulunamadı.</td>
</tr>
                            {% endfor %}
                        </tbody>
</table>
</div>
</div>
</div>
<div class="card border-0 shadow-sm">
<div class="card-header">
<h5 class="mb-0">Başarısız Girişler (Son 24 Saat)</h5>
</div>
<div class="card-body p-0">
<div class="table-responsive">
<table class="table table-striped table-hover mb-0">
<thead class="table-light">
<tr>
<th>Saat</th>
<th>Adet</th>
</tr>
</thead>
<tbody>
                            {% for item in failed_logins %}
                            <tr>
<td>{{ item.time }}</td>
<td>{{ item.value }}</td>
</tr>
                            {% else %}
                            <tr>
<td class="text-center py-3 text-muted" colspan="2">Veri bulunamadı.</td>
</tr>
                            {% endfor %}
                        </tbody>
</table>
</div>
</div>
</div>
</div>
<div class="col-lg-6">
<div class="card border-0 shadow-sm">
<div class="card-header">
<h5 class="mb-0">Son Güvenlik Olayları</h5>
</div>
<div class="card-body p-0">
<div class="table-responsive">
<table class="table table-striped table-hover mb-0">
<thead class="table-light">
<tr>
<th>Tür</th>
<th>Seviye</th>
<th>Açıklama</th>
<th>Kullanıcı</th>
<th>Zaman</th>
</tr>
</thead>
<tbody>
                            {% for e in events %}
                            <tr>
<td>{{ e.type }}</td>
<td>
                                    {% if e.severity == 'critical' %}
                                    <span class="badge bg-danger">Critical</span>
                                    {% elif e.severity == 'warning' %}
                                    <span class="badge bg-warning text-dark">Warning</span>
                                    {% else %}
                                    <span class="badge bg-secondary">{{ e.severity }}</span>
                                    {% endif %}
                                </td>
<td>{{ e.description }}</td>
<td>{{ e.user_id }}</td>
<td>{{ e.timestamp }}</td>
</tr>
                            {% else %}
                            <tr>
<td class="text-center py-3 text-muted" colspan="5">Kayıt bulunamadı.</td>
</tr>
                            {% endfor %}
                        </tbody>
</table>
</div>
</div>
</div>
</div>
</div>

{% endblock %}

