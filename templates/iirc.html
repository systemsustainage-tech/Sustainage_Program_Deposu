{% extends "base.html" %}

{% block title %}{{ _('iirc_title') }} - SDG Platform{% endblock %}

{% block content %}

<div class="row mb-4">
<div class="col-md-12">
<div class="d-flex justify-content-between align-items-center">
<h1><i class="fas fa-puzzle-piece me-2"></i>{{ _('iirc_title') }}</h1>
<div>
<button class="btn btn-primary" data-bs-target="#addIIRCModal" data-bs-toggle="modal" type="button">
<i class="fas fa-plus me-1"></i> {{ _('btn_add_data') }}
                </button>
<button class="btn btn-sm btn-outline-secondary ms-2" onclick="history.back()"><i class="bi bi-arrow-left"></i> {{ _('btn_back', 'Geri') }}</button></div>
</div>
<p class="lead text-muted">{{ _('iirc_desc') }}</p>
</div>
</div>

{% if stats %}
<div class="row mb-4">
<div class="col-md-6">
<div class="card bg-primary text-white shadow-sm h-100">
<div class="card-body text-center">
<h6 class="card-title text-uppercase mb-2" style="opacity: 0.8;">Toplam Rapor</h6>
<h2 class="display-4 fw-bold mb-0">{{ stats.total_reports }}</h2>
</div>
</div>
</div>
<div class="col-md-6">
<div class="card bg-success text-white shadow-sm h-100">
<div class="card-body text-center">
<h6 class="card-title text-uppercase mb-2" style="opacity: 0.8;">Son Rapor Yılı</h6>
<h2 class="display-4 fw-bold mb-0">{{ stats.latest_year }}</h2>
</div>
</div>
</div>
</div>
{% endif %}

<!-- Add IIRC Modal -->
<div aria-hidden="true" aria-labelledby="addIIRCModalLabel" class="modal fade" id="addIIRCModal" tabindex="-1">
<div class="modal-dialog">
<div class="modal-content">
<div class="modal-header">
<h5 class="modal-title" id="addIIRCModalLabel">{{ _('iirc_title') }} - {{ _('btn_add_data') }}</h5>
<button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
</div>
<form action="{{ url_for('iirc_add') }}" method="POST">
<div class="modal-body">
<div class="mb-3">
<label class="form-label" for="year">{{ _('year') }}</label>
<input class="form-control" id="year" name="year" required="" type="number" value="2025"/>
</div>
<div class="mb-3">
<label class="form-label" for="report_name">{{ _('report_name') }}</label>
<input class="form-control" id="report_name" name="report_name" required="" type="text"/>
</div>
<div class="mb-3">
<label class="form-label" for="report_description">{{ _('description') }}</label>
<textarea class="form-control" id="report_description" name="report_description" rows="3"></textarea>
</div>
</div>
<div class="modal-footer">
<button class="btn btn-secondary" data-bs-dismiss="modal" type="button">{{ _('cancel') }}</button>
<button class="btn btn-primary" type="submit">{{ _('save') }}</button>
</div>
</form>
</div>
</div>
</div>
<div class="row">
<div class="col-md-12">
<div class="card shadow-sm border-0">
<div class="card-header bg-light">
<h5 class="mb-0">Entegre Raporlar</h5>
</div>
<div class="card-body p-0">
<div class="table-responsive">
<table class="table table-hover mb-0">
<thead>
<tr>
<th>Yıl</th>
<th>Rapor Adı</th>
<th>Açıklama</th>
<th>Oluşturulma Tarihi</th>
</tr>
</thead>
<tbody>
                            {% if reports %}
                                {% for report in reports %}
                                <tr>
<td>{{ report.year }}</td>
<td>{{ report.report_name }}</td>
<td>{{ report.description }}</td>
<td>{{ report.created_at }}</td>
</tr>
                                {% endfor %}
                            {% else %}
                                <tr>
<td class="text-center py-4 text-muted" colspan="4">
                                        Henüz rapor bulunmuyor.
                                    </td>
</tr>
                            {% endif %}
                        </tbody>
</table>
</div>
</div>
</div>
</div>
</div>
{% endblock %}
