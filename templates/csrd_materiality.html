{% extends "base.html" %}

{% block title %}{{ lang('csrd_materiality_title') }} - SDG{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="mb-0">{{ lang('csrd_materiality_title') }}</h4>
                <button class="btn btn-sm btn-outline-secondary" onclick="history.back()"><i class="bi bi-arrow-left"></i> {{ lang('btn_back', 'Geri') }}</button>
            </div>
            <div class="card-body">
                <p class="text-muted mb-4">{{ lang('csrd_materiality_desc') }}</p>
                
                <form method="post" class="needs-validation" novalidate>
                    <div class="mb-3">
                        <label class="form-label">{{ lang('csrd_topic') }}</label>
                        <select class="form-select" name="topic" required>
                            <option value="E1-Climate Change">E1 - İklim Değişikliği</option>
                            <option value="E2-Pollution">E2 - Kirlilik</option>
                            <option value="E3-Water">E3 - Su ve Deniz Kaynakları</option>
                            <option value="E4-Biodiversity">E4 - Biyoçeşitlilik ve Ekosistemler</option>
                            <option value="E5-Circular Economy">E5 - Kaynak Kullanımı ve Döngüsel Ekonomi</option>
                            <option value="S1-Own Workforce">S1 - Kendi İşgücü</option>
                            <option value="S2-Workers in Value Chain">S2 - Değer Zincirindeki Çalışanlar</option>
                            <option value="S3-Affected Communities">S3 - Etkilenen Topluluklar</option>
                            <option value="S4-Consumers">S4 - Tüketiciler</option>
                            <option value="G1-Business Conduct">G1 - İş Etiği</option>
                        </select>
                    </div>

                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-primary">{{ lang('csrd_impact_score') }} (1-5)</label>
                            <input type="range" class="form-range" name="impact_score" min="1" max="5" step="1" id="impactRange" oninput="document.getElementById('impactVal').innerText = this.value">
                            <div class="text-center fw-bold" id="impactVal">3</div>
                            <small class="form-text text-muted">Şirketin çevre/toplum üzerindeki etkisi.</small>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label text-success">{{ lang('csrd_financial_score') }} (1-5)</label>
                            <input type="range" class="form-range" name="financial_score" min="1" max="5" step="1" id="finRange" oninput="document.getElementById('finVal').innerText = this.value">
                            <div class="text-center fw-bold" id="finVal">3</div>
                            <small class="form-text text-muted">Konunun şirketin finansal durumu üzerindeki etkisi.</small>
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">{{ lang('csrd_rationale') }}</label>
                        <textarea class="form-control" name="rationale" rows="3" required></textarea>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{{ url_for('csrd_module') }}" class="btn btn-light">{{ lang('common.btn_cancel') }}</a>
                        <button type="submit" class="btn btn-primary">{{ lang('common.btn_save') }}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
